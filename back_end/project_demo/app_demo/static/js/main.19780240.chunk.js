(this.webpackJsonpreact_demo=this.webpackJsonpreact_demo||[]).push([[0],{206:function(e,a,t){e.exports=t(422)},211:function(e,a,t){},212:function(e,a,t){},213:function(e,a,t){},421:function(e,a,t){},422:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(7),o=t.n(s),l=(t(211),t(212),t(80)),c=t(51),i=t(35),u=t(41),d=t(43),m=t(42),p=t(44),f=(t(148),t(213),t(424)),h=t(144),g=t(8),v=t(19),b=t.n(v),E=t(423),w=t(426),C=t(24),k=t(425),y=t(146),S=t(429),x=t(427),O=t(428),j=t(430),T=t(36),M=t.n(T),_={id:"id",name:"name",age:"age",address:"address"},I=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(d.a)(this,Object(m.a)(a).call(this,e))).state={loading:!1,visible:!1},t.funcShowCreateModal=function(e){return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t.strFooterText=t.strCteateFooterText,t.handleOk=t.funcCreate,t.funcCallback=e,a.next=5,b.a.awrap(t.setState({visible:!0}));case 5:case"end":return a.stop()}}))},t.funcShowUpdateModal=function(e,a,n,r,s){var o;return b.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t.strFooterText=t.strUpdateFooterText,t.handleOk=t.funcUpdate,t.funcCallback=s,(o={})[_.id]={value:e},o[_.name]={value:a},o[_.age]={value:n},o[_.address]={value:r},l.next=10,b.a.awrap(t.setState(o));case 10:t.setState({visible:!0});case 11:case"end":return l.stop()}}))},t.strFooterText=null,t.strCteateFooterText="Create",t.strUpdateFooterText="Update",t.funcCallback=null,t.handleOk=null,t.funcCreate=function(){var e;return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return(e={})[_.name]=t.state[_.name].value,e[_.address]=t.state[_.address].value,e[_.age]=t.state[_.age].value,a.next=6,b.a.awrap(M.a.request({url:"/api/vi/customer",method:"post",params:{token:t.props.token},data:e}));case 6:a.sent.data.success&&t.funcCallback(),t.setState({visible:!1});case 9:case"end":return a.stop()}}))},t.funcUpdate=function(){var e;return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return(e={})[_.id]=t.state[_.id].value,e[_.name]=t.state[_.name].value,e[_.address]=t.state[_.address].value,e[_.age]=t.state[_.age].value,a.next=7,b.a.awrap(M.a.request({url:"/api/vi/customer",method:"put",params:{token:t.props.token},data:e}));case 7:a.sent.data.success&&t.funcCallback(),t.setState({visible:!1});case 10:case"end":return a.stop()}}))},t.handleCancel=function(){t.setState({visible:!1})},t.funcValidateAge=function(e){return e<=0||e>=100?{validateStatus:"error",errorMsg:"The age between 0 and 100 "}:{validateStatus:"success",errorMsg:null}},t.handleAgeChange=function(e){t.state[_.age]=Object(y.a)({},t.funcValidateAge(e),{value:e}),t.setState(t.state[_.age])},t.funcValidateEmpty=function(e){return""===e?{validateStatus:"error",errorMsg:"please input ! "}:{validateStatus:"success",errorMsg:null}},t.handleInputOnChange=function(e){var a=e.target.id;t.state[a]=Object(y.a)({},t.funcValidateEmpty(e.target.value),{value:e.target.value}),t.setState(t.state[a])},t.state[_.name]={value:""},t.state[_.address]={value:""},t.state[_.age]={value:0},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){var e=this.state,a=e.visible,t=e.loading;return r.a.createElement("div",null,r.a.createElement(S.a,{visible:a,title:"Title",onOk:this.handleOk,onCancel:this.handleCancel,footer:[r.a.createElement(C.a,{key:"back",onClick:this.handleCancel},"Cancel"),r.a.createElement(C.a,{key:"submit",type:"primary",loading:t,onClick:this.handleOk},this.strFooterText)]},r.a.createElement(x.a,{labelCol:{span:4},wrapperCol:{span:20}},r.a.createElement(x.a.Item,{label:_.name,validateStatus:this.state[_.name].validateStatus,help:this.state[_.name].errorMsg},r.a.createElement(O.a,{id:_.name,value:this.state[_.name].value,onChange:this.handleInputOnChange})),r.a.createElement(x.a.Item,{label:_.age,validateStatus:this.state[_.age].validateStatus,help:this.state[_.age].errorMsg},r.a.createElement(j.a,{min:0,max:100,value:this.state[_.age].value,onChange:this.handleAgeChange,style:{width:"100%"}})),r.a.createElement(x.a.Item,{label:_.address,validateStatus:this.state[_.address].validateStatus,help:this.state[_.address].errorMsg},r.a.createElement(O.a,{id:_.address,value:this.state[_.address].value,onChange:this.handleInputOnChange})))))}}]),a}(n.Component),D=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(d.a)(this,Object(m.a)(a).call(this,e))).funcLoadTable=function(){var e;return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.a.awrap(M.a.request({url:"/api/vi/customer",method:"get",params:{token:t.props.token}}));case 2:(e=a.sent).data.success&&t.setState({dataSource:e.data.data});case 4:case"end":return a.stop()}}))},t.funcUpdateTable=function(e){t.refCreateAndUpdateModal.current.funcShowUpdateModal(e.id,e.name,e.age,e.address,t.funcLoadTable)},t.funcShowCreateModal=function(){t.refCreateAndUpdateModal.current.funcShowCreateModal(t.funcLoadTable)},t.funcDelete=function(e){var a;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return(a={})[_.id]=e,n.next=4,b.a.awrap(M.a.request({url:"/api/vi/customer",method:"delete",params:{token:t.props.token},data:a}));case 4:n.sent.data.success&&t.funcLoadTable();case 6:case"end":return n.stop()}}))},t.columns=[{title:"name",dataIndex:"name",width:"30%",editable:!0},{title:"age",dataIndex:"age"},{title:"address",dataIndex:"address"},{title:"operation",dataIndex:"operation",render:function(e,a){return r.a.createElement("div",null,r.a.createElement("a",{style:{marginRight:"10px"},onClick:function(){return t.funcUpdateTable(a)}},"Update"),r.a.createElement(E.a,{title:"Sure to delete?",onConfirm:function(){return t.funcDelete(a.id)}},r.a.createElement("a",null,"Delete")))}}],t.state={dataSource:[]},t.funcLoadTable(),t.refCreateAndUpdateModal=r.a.createRef(),t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){var e=this.state.dataSource,a=this.columns;return r.a.createElement(w.a,{type:"inner",title:"Crud Demo",extra:r.a.createElement(C.a,{onClick:this.funcShowCreateModal,type:"primary"},"Create")},r.a.createElement(k.a,{rowClassName:function(){return"editable-row"},bordered:!0,dataSource:e,columns:a}),r.a.createElement(I,{ref:this.refCreateAndUpdateModal,token:this.props.token}))}}]),a}(n.Component),F=t(61),P=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(d.a)(this,Object(m.a)(a).call(this,e))).funcRefresh=function(){var e,a;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.a.awrap(M.a.request({url:"/api/vi/customer",method:"get",params:{token:t.props.token}}));case 2:e=n.sent,a=e.data.data.map((function(e){return{name:e.name+"-"+e.address,age:e.age}})),t.setState({data:a});case 5:case"end":return n.stop()}}))},t.state={data:[]},t.funcRefresh(),t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(w.a,{type:"inner",title:"Crud Demo",extra:r.a.createElement(C.a,{onClick:this.funcRefresh,type:"primary"},"Refresh")},r.a.createElement(F.Chart,{height:500,data:this.state.data,scale:{age:{alias:"Age"},name:{alias:"Name"}},forceFit:!0},r.a.createElement(F.Axis,{title:!0,name:"name"}),r.a.createElement(F.Axis,{title:!0,name:"age"}),r.a.createElement(F.Legend,null),r.a.createElement(F.Tooltip,{crosshairs:{type:"rect"}}),r.a.createElement(F.Geom,{type:"interval",position:"name*age",color:"name"})))}}]),a}(n.Component),U=f.a.Header,A=f.a.Sider,L=f.a.Content,R=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(d.a)(this,Object(m.a)(a).call(this,e))).state={collapsed:!1,username:"",token:""},t.toggle=function(){t.setState({collapsed:!t.state.collapsed})},t.props.history.location.state&&(t.state.username=t.props.history.location.state.username,t.state.token=t.props.history.location.state.token),t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){var e=this.state,a=e.username,t=e.token;return""===a||""===t?r.a.createElement(c.a,{to:"/login"}):r.a.createElement(f.a,null,r.a.createElement(A,{trigger:null,collapsible:!0,collapsed:this.state.collapsed},r.a.createElement("div",{className:"logo"}),r.a.createElement(h.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"]},r.a.createElement(h.a.Item,{key:"1"},r.a.createElement(l.b,{to:"/CrudDemo"},r.a.createElement(g.a,{type:"home"}),r.a.createElement("span",null,"Crud Demo"))),r.a.createElement(h.a.Item,{key:"2"},r.a.createElement(l.b,{to:"/ChartDemo"},r.a.createElement(g.a,{type:"bar-chart"}),r.a.createElement("span",null,"Chart Demo"))))),r.a.createElement(f.a,null,r.a.createElement(U,{style:{background:"#fff",padding:0}},r.a.createElement(g.a,{className:"trigger",type:this.state.collapsed?"menu-unfold":"menu-fold",onClick:this.toggle})),r.a.createElement(L,{style:{margin:"24px 16px",padding:24,background:"#fff",minHeight:280}},r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/CrudDemo"},r.a.createElement(D,{token:this.state.token})),r.a.createElement(c.b,{path:"/ChartDemo"},r.a.createElement(P,{token:this.state.token})),r.a.createElement(c.a,{to:"/CrudDemo"})))))}}]),a}(n.Component),N=(t(421),t(431)),q=function e(){Object(i.a)(this,e)};q.username="username",q.password="password",q.register_username="register_username",q.register_password="register_password",q.register_confirm_password="register_confirm_password";var H=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(d.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(r)))).state={visible:!1,confirmLoading:!1},t.funcHandleSubmitLogin=function(e){e.preventDefault(),t.props.form.validateFields([q.username,q.password],(function(e,a){var n;return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=5;break}return r.next=3,b.a.awrap(M.a.post("/login",{username:a[q.username],password:a[q.password]}));case 3:200===(n=r.sent).data.status?t.props.history.replace({pathname:"/",state:{username:n.data.username,token:n.data.token}}):N.a.warning(n.data.message);case 5:case"end":return r.stop()}}))}))},t.funcHandleSubmitRegister=function(){t.props.form.validateFields([q.register_username,q.register_password,q.register_confirm_password],(function(e,a){var n;return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=7;break}return t.setState({confirmLoading:!0}),r.next=4,b.a.awrap(M.a.post("/register",{username:a[q.register_username],password:a[q.register_password]}));case 4:200===(n=r.sent).data.status?N.a.success(n.data.message):N.a.warning(n.data.message),t.setState({visible:!1,confirmLoading:!1});case 7:case"end":return r.stop()}}))}))},t.handleConfirmBlur=function(e){var a=e.target.value;t.setState({confirmDirty:t.state.confirmDirty||!!a})},t.compareToFirstPassword=function(e,a,n){var r=t.props.form;a&&a!==r.getFieldValue(q.register_password)?n("Two passwords that you enter is inconsistent!"):n()},t.validateToNextPassword=function(e,a,n){var r=t.props.form;a&&t.state.confirmDirty&&r.validateFields(["confirm"],{force:!0}),n()},t.handleCancel=function(){console.log("Clicked cancel button"),t.setState({visible:!1})},t.funcShowRegisterModal=function(){t.setState({visible:!0})},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,a=this.state,t=a.visible,n=a.confirmLoading;return r.a.createElement("div",{className:"Container"},r.a.createElement(w.a,{className:"ContainerCard",title:"DEMO",extra:r.a.createElement("a",{onClick:this.funcShowRegisterModal},"Account")},r.a.createElement(x.a,{onSubmit:this.funcHandleSubmitLogin,className:"login-form"},r.a.createElement(x.a.Item,null,e(q.username,{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(O.a,{prefix:r.a.createElement(g.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement(x.a.Item,null,e(q.password,{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(O.a,{prefix:r.a.createElement(g.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(x.a.Item,null,r.a.createElement(C.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"),"Or ",r.a.createElement("a",{onClick:this.funcShowRegisterModal},"register now!"))),r.a.createElement(S.a,{centered:!0,title:"Register",visible:t,onOk:this.funcHandleSubmitRegister,confirmLoading:n,onCancel:this.handleCancel,width:"600px"},r.a.createElement(x.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:16}},{onSubmit:this.handleSubmit}),r.a.createElement(x.a.Item,{label:"user name"},e(q.register_username,{rules:[{required:!0,message:"Please input your user name!"}]})(r.a.createElement(O.a,null))),r.a.createElement(x.a.Item,{label:"Password",hasFeedback:!0},e(q.register_password,{rules:[{required:!0,message:"Please input your password!"},{validator:this.validateToNextPassword}]})(r.a.createElement(O.a.Password,null))),r.a.createElement(x.a.Item,{label:"Confirm Password",hasFeedback:!0},e(q.register_confirm_password,{rules:[{required:!0,message:"Please confirm your password!"},{validator:this.compareToFirstPassword}]})(r.a.createElement(O.a.Password,{onBlur:this.handleConfirmBlur})))))))}}]),a}(n.Component),B=x.a.create()(H);var V=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(l.a,null,r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/login",component:B}),r.a.createElement(c.b,{path:"/",component:R}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[206,1,2]]]);
//# sourceMappingURL=main.19780240.chunk.js.map